[project]
name = "dummyxarray"
version = "0.1.0"
description = "A lightweight xarray-like object for building dataset metadata specifications"
channels = ["conda-forge"]
platforms = ["osx-arm64", "osx-64", "linux-64"]

[dependencies]
# Runtime / data dependencies
python = ">=3.9"
cf-xarray = ">=0.8.0"
numpy = ">=1.20.0"
pyyaml = ">=5.4.0"
zarr = ">=2.10.0"
netcdf4 = ">=1.7.3,<2"
xarray = ">=0.19.0"

[feature.pytest.dependencies]
pytest = ">=7.0.0"
pytest-cov = ">=4.0.0"

[feature.pytest.tasks]
test = "PYTHONPATH=src pytest tests/ -v --cov=src --cov-report=term-missing"
test-fast = "PYTHONPATH=src pytest tests/ -v -k 'not slow'"

[feature.lint.dependencies]
black = ">=24.0.0"
isort = ">=5.13.0"
ruff = ">=0.1.0"
markdownlint-cli2 = ">=0.12.0"
yamllint = ">=1.35.0"

[feature.lint.tasks]
lint-python = "ruff check src/ tests/ examples/"
lint-markdown = "markdownlint-cli2 '**/*.md' '#node_modules'"
lint-yaml = "yamllint .github/workflows/"
lint = { depends-on = ["lint-python", "lint-markdown", "lint-yaml"] }

[feature.docs.dependencies]
mkdocs = ">=1.5.0"
mkdocs-material = ">=9.0.0"
mkdocstrings = ">=0.24.0"
mkdocstrings-python = ">=1.7.0"

[feature.docs.tasks]
docs-serve = "mkdocs serve"
docs-build = "mkdocs build"
docs-deploy = "mkdocs gh-deploy"

[tasks]
# Development shortcuts
test = "pixi run pytest.test"
test-fast = "pixi run pytest.test-fast"
python = "PYTHONPATH=src python"
ipython = "PYTHONPATH=src ipython"
example = "PYTHONPATH=src python examples/example.py"

# Documentation
docs-serve = "pixi run docs.docs-serve"
docs-build = "pixi run docs.docs-build"
docs-deploy = "pixi run docs.docs-deploy"

# Formatting tasks
format = { depends-on = ["format-python", "format-imports"] }
format-python = "black src/ tests/ examples/"
format-imports = "isort src/ tests/ examples/"

# Linting tasks (feature-defined)
lint = "pixi run lint.lint"
lint-python = "pixi run lint.lint-python"
lint-markdown = "pixi run lint.lint-markdown"
lint-yaml = "pixi run lint.lint-yaml"

# Check formatting without modifying files
check-format = { depends-on = ["check-format-python", "check-format-imports"] }
check-format-python = "black --check src/ tests/ examples/"
check-format-imports = "isort --check-only src/ tests/ examples/"

# Run all checks (format check + lint)
check = { depends-on = ["check-format", "lint"] }

[environments.default]
features = ["pytest", "lint", "docs"]

[activation]
scripts = ["activation.sh"]
